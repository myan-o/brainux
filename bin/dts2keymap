#!/bin/bash

dts=`cat - | tr -d '\t' | tr -d '\n'`
echo "$dts" | sed -rn 's|.*keymap[\t ]*=[\t ]*<([^>]*).*|\1|p' | tr ' ' '\n' | awk '{if(NR%2){l=$0}else{print l "," $0}}'
echo "$dts" | cat - | tr -d '\t' | tr -d '\n' | sed -rn 's|.*symbol-keycode[\t ]*=[\t ]*<([^>]*).*|\1,SYMBOL\n|p'
echo "KEYMAP-SYMBOL,KEYMAP-SYMBOL"
echo "$dts" | sed -rn 's|.*keymap-symbol[\t ]*=[\t ]*<([^>]*).*|\1|p' | tr ' ' '\n' | awk '{if(NR%2){l=$0}else{print l "," $0}}'
